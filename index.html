<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ashishverseyt - Photo Editor</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 0; padding: 20px; background: #f0f0f0; }
        h1 { text-align: center; color: #333; }
        #canvas { border: 1px solid #ccc; max-width: 100%; height: auto; }
        .controls { margin-top: 20px; display: flex; flex-wrap: wrap; gap: 10px; justify-content: center; }
        button { padding: 10px 15px; background: #007bff; color: white; border: none; cursor: pointer; }
        button:hover { background: #0056b3; }
        input[type="file"] { margin: 10px; }
        .slider { margin: 10px; }
        #textInput { width: 200px; padding: 5px; }
    </style>
</head>
<body>
    <h1>Welcome to Ashishverseyt - Your Photo Editor</h1>
    <input type="file" id="upload" accept="image/*">
    <canvas id="canvas" width="800" height="600"></canvas>
    <div class="controls">
        <button id="crop">Crop</button>
        <button id="rotate">Rotate 90Â°</button>
        <button id="flipH">Flip Horizontal</button>
        <button id="flipV">Flip Vertical</button>
        <button id="filterBW">Black & White</button>
        <button id="filterSepia">Sepia</button>
        <button id="filterVintage">Vintage</button>
        <button id="addText">Add Text</button>
        <input type="text" id="textInput" placeholder="Enter text">
        <button id="enhance">Enhance (Brightness/Contrast)</button>
        <button id="aiEnhance">AI Enhance (Upscale & Sharpen)</button>
        <button id="download">Download</button>
    </div>
    <div class="controls">
        <label>Brightness: <input type="range" id="brightness" min="-100" max="100" value="0" class="slider"></label>
        <label>Contrast: <input type="range" id="contrast" min="-100" max="100" value="0" class="slider"></label>
        <label>Saturation: <input type="range" id="saturation" min="-100" max="100" value="0" class="slider"></label>
        <label>Sharpness: <input type="range" id="sharpness" min="0" max="10" value="0" class="slider"></label>
    </div>

    <script>
        const canvas = document.getElementById('canvas');
        const ctx = canvas.getContext('2d');
        let img = new Image();
        let originalImgData;

        // Upload image
        document.getElementById('upload').addEventListener('change', (e) => {
            const file = e.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = () => {
                    img.onload = () => {
                        canvas.width = img.width;
                        canvas.height = img.height;
                        ctx.drawImage(img, 0, 0);
                        originalImgData = ctx.getImageData(0, 0, canvas.width, canvas.height);
                    };
                    img.src = reader.result;
                };
                reader.readAsDataURL(file);
            }
        });

        // Apply filters
        function applyFilter(filter) {
            if (!originalImgData) return;
            ctx.putImageData(originalImgData, 0, 0);
            const imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);
            const data = imageData.data;
            for (let i = 0; i < data.length; i += 4) {
                const r = data[i], g = data[i+1], b = data[i+2];
                if (filter === 'bw') {
                    const gray = 0.299*r + 0.587*g + 0.114*b;
                    data[i] = data[i+1] = data[i+2] = gray;
                } else if (filter === 'sepia') {
                    data[i] = Math.min(255, r*0.393 + g*0.769 + b*0.189);
                    data[i+1] = Math.min(255, r*0.349 + g*0.686 + b*0.168);
                    data[i+2] = Math.min(255, r*0.272 + g*0.534 + b*0.131);
                } else if (filter === 'vintage') {
                    data[i] = Math.min(255, r + 20);
                    data[i+1] = Math.min(255, g + 10);
                    data[i+2] = Math.min(255, b - 10);
                }
            }
            ctx.putImageData(imageData, 0, 0);
        }

        // Enhance (adjust brightness, contrast, etc.)
        function applyEnhance() {
            if (!originalImgData) return;
            ctx.putImageData(originalImgData, 0, 0);
            const imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);
            const data = imageData.data;
            const brightness = parseInt(document.getElementById('brightness').value);
            const contrast = parseInt(document.getElementById('contrast').value);
            const saturation = parseInt(document.getElementById('saturation').value);
            const sharpness = parseInt(document.getElementById('sharpness').value);

            for (let i = 0; i < data.length; i += 4) {
                // Brightness
                data[i] = Math.min(255, Math.max(0, data[i] + brightness));
                data[i+1] = Math.min(255, Math.max(0, data[i+1] + brightness));
                data[i+2] = Math.min(255, Math.max(0, data[i+2] + brightness));

                // Contrast (simple factor)
                const factor = (259 * (contrast + 255)) / (255 * (259 - contrast));
                data[i] = Math.min(255, Math.max(0, factor * (data[i] - 128) + 128));
                data[i+1] = Math.min(255, Math.max(0, factor * (data[i+1] - 128) + 128));
                data[i+2] = Math.min(255, Math.max(0, factor * (data[i+2] - 128) + 128));

                // Saturation (adjust towards gray)
                const gray = 0.299*data[i] + 0.587*data[i+1] + 0.114*data[i+2];
                data[i] = Math.min(255, Math.max(0, gray + saturation * (data[i] - gray)));
                data[i+1] = Math.min(255, Math.max(0, gray + saturation * (data[i+1] - gray)));
                data[i+2] = Math.min(255, Math.max(0, gray + saturation * (data[i+2] - gray)));
            }

            // Simple sharpness (edge detection approximation)
            if (sharpness > 0) {
                const tempCanvas = document.createElement('canvas');
                tempCanvas.width = canvas.width;
                tempCanvas.height = canvas.height;
                const tempCtx = tempCanvas.getContext('2d');
                tempCtx.filter = `blur(${sharpness}px)`;
                tempCtx.drawImage(canvas, 0, 0);
                ctx.globalCompositeOperation = 'overlay';
                ctx.drawImage(tempCanvas, 0, 0);
                ctx.globalCompositeOperation = 'source-over';
            }

            ctx.putImageData(imageData, 0, 0);
        }

        // AI Enhance (basic upscale and sharpen)
        document.getElementById('aiEnhance').addEventListener('click', () => {
            if (!originalImgData) return;
            // Simple upscale by drawing larger
            const scale = 1.5;
            const newWidth = canvas.width * scale;
            const newHeight = canvas.height * scale;
            const tempCanvas = document.createElement('canvas');
            tempCanvas.width = newWidth;
            tempCanvas.height = newHeight;
            const tempCtx = tempCanvas.getContext('2d');
            tempCtx.drawImage(canvas, 0, 0, newWidth, newHeight);
            canvas.width = newWidth;
            canvas.height = newHeight;
            ctx.drawImage(tempCanvas, 0, 0);
            // Apply sharpen
            ctx.filter = 'contrast(1.2) brightness(1.1)';
            ctx.drawImage(canvas, 0, 0);
            ctx.filter = 'none';
        });

        // Event listeners
        document.getElementById('crop').addEventListener('click', () => {
            // Basic crop (reduce by 10%)
            const newWidth = canvas.width * 0.9;
            const newHeight = canvas.height * 0.9;
            ctx.drawImage(canvas, canvas.width*0.05, canvas.height*0.05, newWidth, newHeight, 0, 0, newWidth, newHeight);
            canvas.width = newWidth;
            canvas.height = newHeight;
        });

        document.getElementById('rotate').addEventListener('click', () => {
            const tempCanvas = document.createElement('canvas');
            tempCanvas.width = canvas.height;
            tempCanvas.height = canvas.width;
            const tempCtx = tempCanvas.getContext('2d');
            tempCtx.translate(tempCanvas.width / 2, tempCanvas.height / 2);
            tempCtx.rotate(Math.PI / 2);
            tempCtx.drawImage(canvas, -canvas.width / 2, -canvas.height / 2);
            canvas.width = tempCanvas.width;
            canvas.height = tempCanvas.height;
            ctx.drawImage(tempCanvas, 0, 0);
        });

        document.getElementById('flipH').addEventListener('click', () => {
            ctx.scale(-1, 1);
            ctx.drawImage(canvas, -canvas.width, 0);
        });

        document.getElementById('flipV').addEventListener('click', () => {
            ctx.scale(1, -1);
            ctx.drawImage(canvas, 0, -canvas.height);
        });

        document.getElementById('filterBW').addEventListener('click', () => applyFilter('bw'));
        document.getElementById('filterSepia').addEventListener('click', () => applyFilter('sepia'));
        document.getElementById('filterVintage').addEventListener('click', () => applyFilter('vintage'));

        document.getElementById('addText').addEventListener('click', () => {
            const text = document.getElementById('textInput').value;
            if (text) {
                ctx.font = '30px Arial';
                ctx.fillStyle = 'white';
                ctx.strokeStyle = 'black';
                ctx.lineWidth = 2;
                ctx.strokeText(text, 50, 50);
                ctx.fillText(text, 50, 50);
            }
        });

        document.getElementById('enhance').addEventListener('click', applyEnhance);
        document.querySelectorAll('.slider').forEach(slider => slider.addEventListener('input', applyEnhance));

        document.getElementById('download').addEventListener('click', () => {
            const link = document.createElement('a');
            link.download = 'edited-photo.png';
            link.href = canvas.toDataURL();
            link.click();
        });
    </script>
</body>
</html>